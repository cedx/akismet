!function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t){(function(e){"use strict";function n(){var n="ontouchstart"in document.documentElement||navigator.maxTouchPoints||navigator.msMaxTouchPoints;n||$('[data-toggle="tooltip"]').tooltip({placement:"auto"}),$("#btn-submit").on("click",function(n){n.preventDefault(),$("#form-unit-tests input").each(function(){var t=$(this);t.val($.trim(t.val()))});var r=$("#blog-url");r.val().length||r.val("http://dev.belin.io/akismet.js");var o=$("#service-url");o.val().length||o.val("http://localhost:3000");var i=$("#api-key");return i.val().length>0?(i.closest(".form-group").removeClass("has-error"),$("main").empty().append('<div id="mocha"></div>'),e.env={AKISMET_API_KEY:i.val(),AKISMET_BLOG:r.val(),AKISMET_SERVICE_URL:o.val()},mocha.setup({ui:"bdd"}),t("../../test/comment_test"),t("../../test/client_test"),void mocha.run()):(i.closest(".form-group").addClass("has-error"),i.focus(),void $("#dialog-alert").modal("show"))})}$(n)}).call(this,t("_process"))},{"../../test/client_test":25,"../../test/comment_test":26,_process:4}],2:[function(t,e){function n(t,e){return f.isUndefined(e)?""+e:f.isNumber(e)&&!isFinite(e)?e.toString():f.isFunction(e)||f.isRegExp(e)?e.toString():e}function r(t,e){return f.isString(t)?t.length<e?t:t.slice(0,e):t}function o(t){return r(JSON.stringify(t.actual,n),128)+" "+t.operator+" "+r(JSON.stringify(t.expected,n),128)}function i(t,e,n,r,o){throw new d.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:o})}function s(t,e){t||i(t,!0,e,"==",d.ok)}function a(t,e){if(t===e)return!0;if(f.isBuffer(t)&&f.isBuffer(e)){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return f.isDate(t)&&f.isDate(e)?t.getTime()===e.getTime():f.isRegExp(t)&&f.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:f.isObject(t)||f.isObject(e)?c(t,e):t==e}function u(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function c(t,e){if(f.isNullOrUndefined(t)||f.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(f.isPrimitive(t)||f.isPrimitive(e))return t===e;var n=u(t),r=u(e);if(n&&!r||!n&&r)return!1;if(n)return t=p.call(t),e=p.call(e),a(t,e);var o,i,s=y(t),c=y(e);if(s.length!=c.length)return!1;for(s.sort(),c.sort(),i=s.length-1;i>=0;i--)if(s[i]!=c[i])return!1;for(i=s.length-1;i>=0;i--)if(o=s[i],!a(t[o],e[o]))return!1;return!0}function l(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function h(t,e,n,r){var o;f.isString(n)&&(r=n,n=null);try{e()}catch(s){o=s}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!o&&i(o,n,"Missing expected exception"+r),!t&&l(o,n)&&i(o,n,"Got unwanted exception"+r),t&&o&&n&&!l(o,n)||!t&&o)throw o}var f=t("util/"),p=Array.prototype.slice,m=Object.prototype.hasOwnProperty,d=e.exports=s;d.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var e=t.stackStartFunction||i;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,s=e.name,a=r.indexOf("\n"+s);if(a>=0){var u=r.indexOf("\n",a+1);r=r.substring(u+1)}this.stack=r}}},f.inherits(d.AssertionError,Error),d.fail=i,d.ok=s,d.equal=function(t,e,n){t!=e&&i(t,e,n,"==",d.equal)},d.notEqual=function(t,e,n){t==e&&i(t,e,n,"!=",d.notEqual)},d.deepEqual=function(t,e,n){a(t,e)||i(t,e,n,"deepEqual",d.deepEqual)},d.notDeepEqual=function(t,e,n){a(t,e)&&i(t,e,n,"notDeepEqual",d.notDeepEqual)},d.strictEqual=function(t,e,n){t!==e&&i(t,e,n,"===",d.strictEqual)},d.notStrictEqual=function(t,e,n){t===e&&i(t,e,n,"!==",d.notStrictEqual)},d.throws=function(){h.apply(this,[!0].concat(p.call(arguments)))},d.doesNotThrow=function(){h.apply(this,[!1].concat(p.call(arguments)))},d.ifError=function(t){if(t)throw t};var y=Object.keys||function(t){var e=[];for(var n in t)m.call(t,n)&&e.push(n);return e}},{"util/":11}],3:[function(t,e){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],4:[function(t,e){function n(){if(!s){s=!0;for(var t,e=i.length;e;){t=i,i=[];for(var n=-1;++n<e;)t[n]();e=i.length}s=!1}}function r(){}var o=e.exports={},i=[],s=!1;o.nextTick=function(t){i.push(t),s||setTimeout(n,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.binding=function(){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],5:[function(t,e,n){(function(t){!function(r){function o(t){throw RangeError(J[t])}function i(t,e){for(var n=t.length;n--;)t[n]=e(t[n]);return t}function s(t,e){return i(t.split(q),e).join(".")}function a(t){for(var e,n,r=[],o=0,i=t.length;i>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function u(t){return i(t,function(t){var e="";return t>65535&&(t-=65536,e+=M(t>>>10&1023|55296),t=56320|1023&t),e+=M(t)}).join("")}function c(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:S}function l(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function h(t,e,n){var r=0;for(t=n?U(t/x):t>>1,t+=U(t/e);t>I*E>>1;r+=S)t=U(t/I);return U(r+(I+1)*t/(t+j))}function f(t){var e,n,r,i,s,a,l,f,p,m,d=[],y=t.length,g=0,v=k,b=A;for(n=t.lastIndexOf(C),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&o("not-basic"),d.push(t.charCodeAt(r));for(i=n>0?n+1:0;y>i;){for(s=g,a=1,l=S;i>=y&&o("invalid-input"),f=c(t.charCodeAt(i++)),(f>=S||f>U((_-g)/a))&&o("overflow"),g+=f*a,p=b>=l?O:l>=b+E?E:l-b,!(p>f);l+=S)m=S-p,a>U(_/m)&&o("overflow"),a*=m;e=d.length+1,b=h(g-s,e,0==s),U(g/e)>_-v&&o("overflow"),v+=U(g/e),g%=e,d.splice(g++,0,v)}return u(d)}function p(t){var e,n,r,i,s,u,c,f,p,m,d,y,g,v,b,w=[];for(t=a(t),y=t.length,e=k,n=0,s=A,u=0;y>u;++u)d=t[u],128>d&&w.push(M(d));for(r=i=w.length,i&&w.push(C);y>r;){for(c=_,u=0;y>u;++u)d=t[u],d>=e&&c>d&&(c=d);for(g=r+1,c-e>U((_-n)/g)&&o("overflow"),n+=(c-e)*g,e=c,u=0;y>u;++u)if(d=t[u],e>d&&++n>_&&o("overflow"),d==e){for(f=n,p=S;m=s>=p?O:p>=s+E?E:p-s,!(m>f);p+=S)b=f-m,v=S-m,w.push(M(l(m+b%v,0))),f=U(b/v);w.push(M(l(f,0))),s=h(n,g,r==i),n=0,++r}++n,++e}return w.join("")}function m(t){return s(t,function(t){return N.test(t)?f(t.slice(4).toLowerCase()):t})}function d(t){return s(t,function(t){return T.test(t)?"xn--"+p(t):t})}var y="object"==typeof n&&n,g="object"==typeof e&&e&&e.exports==y&&e,v="object"==typeof t&&t;(v.global===v||v.window===v)&&(r=v);var b,w,_=2147483647,S=36,O=1,E=26,j=38,x=700,A=72,k=128,C="-",N=/^xn--/,T=/[^ -~]/,q=/\x2E|\u3002|\uFF0E|\uFF61/g,J={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=S-O,U=Math.floor,M=String.fromCharCode;if(b={version:"1.2.4",ucs2:{decode:a,encode:u},decode:f,encode:p,toASCII:d,toUnicode:m},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(y&&!y.nodeType)if(g)g.exports=b;else for(w in b)b.hasOwnProperty(w)&&(y[w]=b[w]);else r.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,o,i){e=e||"&",o=o||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;c>l;++l){var h,f,p,m,d=t[l].replace(a,"%20"),y=d.indexOf(o);y>=0?(h=d.substr(0,y),f=d.substr(y+1)):(h=d,f=""),p=decodeURIComponent(h),m=decodeURIComponent(f),n(s,p)?r(s[p])?s[p].push(m):s[p]=[s[p],m]:s[p]=m}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],7:[function(t,e){"use strict";function n(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,s,a){return e=e||"&",s=s||"=",null===t&&(t=void 0),"object"==typeof t?n(i(t),function(i){var a=encodeURIComponent(r(i))+s;return o(t[i])?n(t[i],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[i]))}).join(e):a?encodeURIComponent(r(a))+s+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],8:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":6,"./encode":7}],9:[function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,n){if(t&&c(t)&&t instanceof r)return t;var o=new r;return o.parse(t,e,n),o}function i(t){return u(t)&&(t=o(t)),t instanceof r?t.format():r.prototype.format.call(t)}function s(t,e){return o(t,!1,!0).resolve(e)}function a(t,e){return t?o(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function l(t){return null===t}function h(t){return null==t}var f=t("punycode");n.parse=o,n.resolve=s,n.resolveObject=a,n.format=i,n.Url=r;var p=/^([a-z0-9.+-]+:)/i,m=/:[0-9]*$/,d=["<",">",'"',"`"," ","\r","\n","	"],y=["{","}","|","\\","^","`"].concat(d),g=["'"].concat(y),v=["%","/","?",";","#"].concat(g),b=["/","?","#"],w=255,_=/^[a-z0-9A-Z_-]{0,63}$/,S=/^([a-z0-9A-Z_-]{0,63})(.*)$/,O={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=t("querystring");r.prototype.parse=function(t,e,n){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var o=p.exec(r);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,r=r.substr(o.length)}if(n||o||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===r.substr(0,2);!s||o&&E[o]||(r=r.substr(2),this.slashes=!0)}if(!E[o]&&(s||o&&!j[o])){for(var a=-1,c=0;c<b.length;c++){var l=r.indexOf(b[c]);-1!==l&&(-1===a||a>l)&&(a=l)}var h,m;m=-1===a?r.lastIndexOf("@"):r.lastIndexOf("@",a),-1!==m&&(h=r.slice(0,m),r=r.slice(m+1),this.auth=decodeURIComponent(h)),a=-1;for(var c=0;c<v.length;c++){var l=r.indexOf(v[c]);-1!==l&&(-1===a||a>l)&&(a=l)}-1===a&&(a=r.length),this.host=r.slice(0,a),r=r.slice(a),this.parseHost(),this.hostname=this.hostname||"";var d="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!d)for(var y=this.hostname.split(/\./),c=0,A=y.length;A>c;c++){var k=y[c];if(k&&!k.match(_)){for(var C="",N=0,T=k.length;T>N;N++)C+=k.charCodeAt(N)>127?"x":k[N];if(!C.match(_)){var q=y.slice(0,c),J=y.slice(c+1),I=k.match(S);I&&(q.push(I[1]),J.unshift(I[2])),J.length&&(r="/"+J.join(".")+r),this.hostname=q.join(".");break}}}if(this.hostname=this.hostname.length>w?"":this.hostname.toLowerCase(),!d){for(var U=this.hostname.split("."),M=[],c=0;c<U.length;++c){var R=U[c];M.push(R.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(R):R)}this.hostname=M.join(".")}var P=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+P,this.href+=this.host,d&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!O[i])for(var c=0,A=g.length;A>c;c++){var H=g[c],F=encodeURIComponent(H);F===H&&(F=escape(H)),r=r.split(H).join(F)}var K=r.indexOf("#");-1!==K&&(this.hash=r.substr(K),r=r.slice(0,K));var z=r.indexOf("?");if(-1!==z?(this.search=r.substr(z),this.query=r.substr(z+1),e&&(this.query=x.parse(this.query)),r=r.slice(0,z)):e&&(this.search="",this.query={}),r&&(this.pathname=r),j[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",R=this.search||"";this.path=P+R}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(i=x.stringify(this.query));var s=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||j[e])&&o!==!1?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+o+n+s+r},r.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(u(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),j[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!j[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||E[t.protocol])n.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),n.pathname=o.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var i=n.pathname||"",s=n.search||"";n.path=i+s}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var a=n.pathname&&"/"===n.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=c||a||n.host&&t.pathname,p=f,m=n.pathname&&n.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],d=n.protocol&&!j[n.protocol];if(d&&(n.hostname="",n.port=null,n.host&&(""===m[0]?m[0]=n.host:m.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),f=f&&(""===o[0]||""===m[0])),c)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,m=o;else if(o.length)m||(m=[]),m.pop(),m=m.concat(o),n.search=t.search,n.query=t.query;else if(!h(t.search)){if(d){n.hostname=n.host=m.shift();var y=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return n.search=t.search,n.query=t.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!m.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var g=m.slice(-1)[0],v=(n.host||t.host)&&("."===g||".."===g)||""===g,b=0,w=m.length;w>=0;w--)g=m[w],"."==g?m.splice(w,1):".."===g?(m.splice(w,1),b++):b&&(m.splice(w,1),b--);if(!f&&!p)for(;b--;b)m.unshift("..");!f||""===m[0]||m[0]&&"/"===m[0].charAt(0)||m.unshift(""),v&&"/"!==m.join("/").substr(-1)&&m.push("");var _=""===m[0]||m[0]&&"/"===m[0].charAt(0);if(d){n.hostname=n.host=_?"":m.length?m.shift():"";var y=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return f=f||n.host&&m.length,f&&!_&&m.unshift(""),m.length?n.pathname=m.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=m.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:5,querystring:8}],10:[function(t,e){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],11:[function(t,e,n){(function(e,r){function o(t,e){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(e)?r.showHidden=e:e&&n._extend(r,e),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),u(r,t,r.depth)}function i(t,e){var n=o.styles[e];return n?"["+o.colors[n][0]+"m"+t+"["+o.colors[n][1]+"m":t}function s(t){return t}function a(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function u(t,e,r){if(t.customInspect&&e&&x(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var o=e.inspect(r,t);return b(o)||(o=u(t,o,r)),o}var i=c(t,e);if(i)return i;var s=Object.keys(e),d=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),j(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(e);if(0===s.length){if(x(e)){var y=e.name?": "+e.name:"";return t.stylize("[Function"+y+"]","special")}if(S(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(E(e))return t.stylize(Date.prototype.toString.call(e),"date");if(j(e))return l(e)}var g="",v=!1,w=["{","}"];if(m(e)&&(v=!0,w=["[","]"]),x(e)){var _=e.name?": "+e.name:"";g=" [Function"+_+"]"}if(S(e)&&(g=" "+RegExp.prototype.toString.call(e)),E(e)&&(g=" "+Date.prototype.toUTCString.call(e)),j(e)&&(g=" "+l(e)),0===s.length&&(!v||0==e.length))return w[0]+g+w[1];if(0>r)return S(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var O;return O=v?h(t,e,r,d,s):s.map(function(n){return f(t,e,r,d,n,v)}),t.seen.pop(),p(O,g,w)}function c(t,e){if(_(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return v(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,o){for(var i=[],s=0,a=e.length;a>s;++s)i.push(T(e,String(s))?f(t,e,n,r,String(s),!0):"");return o.forEach(function(o){o.match(/^\d+$/)||i.push(f(t,e,n,r,o,!0))}),i}function f(t,e,n,r,o,i){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),T(r,o)||(s="["+o+"]"),a||(t.seen.indexOf(c.value)<0?(a=y(n)?u(t,c.value,null):u(t,c.value,n-1),a.indexOf("\n")>-1&&(a=i?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),_(s)){if(i&&o.match(/^\d+$/))return a;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t,e,n){var r=0,o=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function m(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function y(t){return null===t}function g(t){return null==t}function v(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function _(t){return void 0===t}function S(t){return O(t)&&"[object RegExp]"===k(t)}function O(t){return"object"==typeof t&&null!==t}function E(t){return O(t)&&"[object Date]"===k(t)}function j(t){return O(t)&&("[object Error]"===k(t)||t instanceof Error)}function x(t){return"function"==typeof t}function A(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function k(t){return Object.prototype.toString.call(t)}function C(t){return 10>t?"0"+t.toString(10):t.toString(10)}function N(){var t=new Date,e=[C(t.getHours()),C(t.getMinutes()),C(t.getSeconds())].join(":");return[t.getDate(),U[t.getMonth()],e].join(" ")}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var q=/%[sdj%]/g;n.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(o(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,i=r.length,s=String(t).replace(q,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),a=r[n];i>n;a=r[++n])s+=y(a)||!O(a)?" "+a:" "+o(a);return s},n.deprecate=function(t,o){function i(){if(!s){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),s=!0}return t.apply(this,arguments)}if(_(r.process))return function(){return n.deprecate(t,o).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return i};var J,I={};n.debuglog=function(t){if(_(J)&&(J=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!I[t])if(new RegExp("\\b"+t+"\\b","i").test(J)){var r=e.pid;I[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else I[t]=function(){};return I[t]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=m,n.isBoolean=d,n.isNull=y,n.isNullOrUndefined=g,n.isNumber=v,n.isString=b,n.isSymbol=w,n.isUndefined=_,n.isRegExp=S,n.isObject=O,n.isDate=E,n.isError=j,n.isFunction=x,n.isPrimitive=A,n.isBuffer=t("./support/isBuffer");var U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",N(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!O(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":10,_process:4,inherits:3}],12:[function(t,e){"use strict";e.exports=t("./lib/core.js"),t("./lib/done.js"),t("./lib/es6-extensions.js"),t("./lib/node-extensions.js")},{"./lib/core.js":13,"./lib/done.js":14,"./lib/es6-extensions.js":15,"./lib/node-extensions.js":16}],13:[function(t,e){"use strict";function n(t){function e(t){return null===u?void l.push(t):void i(function(){var e=u?t.onFulfilled:t.onRejected;if(null===e)return void(u?t.resolve:t.reject)(c);var n;try{n=e(c)}catch(r){return void t.reject(r)}t.resolve(n)})}function n(t){try{if(t===h)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void o(e.bind(t),n,s)}u=!0,c=t,a()}catch(r){s(r)}}function s(t){u=!1,c=t,a()}function a(){for(var t=0,n=l.length;n>t;t++)e(l[t]);l=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");var u=null,c=null,l=[],h=this;this.then=function(t,n){return new h.constructor(function(o,i){e(new r(t,n,o,i))})},o(t,n,s)}function r(t,e,n,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r}function o(t,e,n){var r=!1;try{t(function(t){r||(r=!0,e(t))},function(t){r||(r=!0,n(t))})}catch(o){if(r)return;r=!0,n(o)}}var i=t("asap");e.exports=n},{asap:17}],14:[function(t,e){"use strict";var n=t("./core.js"),r=t("asap");e.exports=n,n.prototype.done=function(){var t=arguments.length?this.then.apply(this,arguments):this;t.then(null,function(t){r(function(){throw t})})}},{"./core.js":13,asap:17}],15:[function(t,e){"use strict";function n(t){this.then=function(e){return"function"!=typeof e?this:new r(function(n,r){o(function(){try{n(e(t))}catch(o){r(o)}})})}}var r=t("./core.js"),o=t("asap");e.exports=r,n.prototype=r.prototype;var i=new n(!0),s=new n(!1),a=new n(null),u=new n(void 0),c=new n(0),l=new n("");r.resolve=function(t){if(t instanceof r)return t;if(null===t)return a;if(void 0===t)return u;if(t===!0)return i;if(t===!1)return s;if(0===t)return c;if(""===t)return l;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new r(e.bind(t))}catch(o){return new r(function(t,e){e(o)})}return new n(t)},r.all=function(t){var e=Array.prototype.slice.call(t);return new r(function(t,n){function r(i,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(t){r(i,t)},n)}e[i]=s,0===--o&&t(e)}catch(u){n(u)}}if(0===e.length)return t([]);for(var o=e.length,i=0;i<e.length;i++)r(i,e[i])})},r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,n){t.forEach(function(t){r.resolve(t).then(e,n)})})},r.prototype["catch"]=function(t){return this.then(null,t)}},{"./core.js":13,asap:17}],16:[function(t,e){"use strict";var n=t("./core.js"),r=t("asap");e.exports=n,n.denodeify=function(t,e){return e=e||1/0,function(){var r=this,o=Array.prototype.slice.call(arguments);return new n(function(n,i){for(;o.length&&o.length>e;)o.pop();o.push(function(t,e){t?i(t):n(e)});var s=t.apply(r,o);!s||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof s.then||n(s)})}},n.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),o="function"==typeof e[e.length-1]?e.pop():null,i=this;try{return t.apply(this,arguments).nodeify(o,i)}catch(s){if(null===o||"undefined"==typeof o)return new n(function(t,e){e(s)});r(function(){o.call(i,s)})}}},n.prototype.nodeify=function(t,e){return"function"!=typeof t?this:void this.then(function(n){r(function(){t.call(e,null,n)})},function(n){r(function(){t.call(e,n)})})}},{"./core.js":13,asap:17}],17:[function(t,e){(function(t){function n(){for(;o.next;){o=o.next;var t=o.task;o.task=void 0;var e=o.domain;e&&(o.domain=void 0,e.enter());try{t()}catch(r){if(u)throw e&&e.exit(),setTimeout(n,0),e&&e.enter(),r;setTimeout(function(){throw r},0)}e&&e.exit()}s=!1}function r(e){i=i.next={task:e,domain:u&&t.domain,next:null},s||(s=!0,a())}var o={task:void 0,next:null},i=o,s=!1,a=void 0,u=!1;if("undefined"!=typeof t&&t.nextTick)u=!0,a=function(){t.nextTick(n)};else if("function"==typeof setImmediate)a="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=n,a=function(){c.port2.postMessage(0)}}else a=function(){setTimeout(n,0)};e.exports=r}).call(this,t("_process"))},{_process:4}],18:[function(t,e){function n(){}function r(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(){if(y.XMLHttpRequest&&("file:"!=y.location.protocol||!y.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function i(t){return t===Object(t)}function s(t){if(!i(t))return t;var e=[];for(var n in t)null!=t[n]&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}function a(t){for(var e,n,r={},o=t.split("&"),i=0,s=o.length;s>i;++i)n=o[i],e=n.split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return r}function u(t){var e,n,r,o,i=t.split(/\r?\n/),s={};i.pop();for(var a=0,u=i.length;u>a;++a)n=i[a],e=n.indexOf(":"),r=n.slice(0,e).toLowerCase(),o=g(n.slice(e+1)),s[r]=o;return s}function c(t){return t.split(/ *; */).shift()}function l(t){return d(t.split(/ *; */),function(t,e){var n=e.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(t[r]=o),t},{})}function h(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method?this.xhr.responseText:null,this.setStatusProperties(this.xhr.status),this.header=this.headers=u(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function f(t,e){var n=this;m.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new h(n)}catch(r){t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=r}n.callback(t,e)})}function p(t,e){return"function"==typeof e?new f("GET",t).end(e):1==arguments.length?new f("GET",t):new f(t,e)}var m=t("emitter"),d=t("reduce"),y="undefined"==typeof window?this:window,g="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};p.serializeObject=s,p.parseString=a,p.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},p.serialize={"application/x-www-form-urlencoded":s,"application/json":JSON.stringify},p.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},h.prototype.get=function(t){return this.header[t.toLowerCase()]},h.prototype.setHeaderProperties=function(){var t=this.header["content-type"]||"";this.type=c(t);var e=l(t);for(var n in e)this[n]=e[n]},h.prototype.parseBody=function(t){var e=p.parse[this.type];return e&&t&&t.length?e(t):null},h.prototype.setStatusProperties=function(t){var e=t/100|0;this.status=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t||1223==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},h.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",o=new Error(r);return o.status=this.status,o.method=e,o.url=n,o},p.Response=h,m(f.prototype),f.prototype.use=function(t){return t(this),this},f.prototype.timeout=function(t){return this._timeout=t,this},f.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},f.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},f.prototype.set=function(t,e){if(i(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},f.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},f.prototype.getHeader=function(t){return this._header[t.toLowerCase()]
},f.prototype.type=function(t){return this.set("Content-Type",p.types[t]||t),this},f.prototype.accept=function(t){return this.set("Accept",p.types[t]||t),this},f.prototype.auth=function(t,e){var n=btoa(t+":"+e);return this.set("Authorization","Basic "+n),this},f.prototype.query=function(t){return"string"!=typeof t&&(t=s(t)),t&&this._query.push(t),this},f.prototype.field=function(t,e){return this._formData||(this._formData=new FormData),this._formData.append(t,e),this},f.prototype.attach=function(t,e,n){return this._formData||(this._formData=new FormData),this._formData.append(t,e,n),this},f.prototype.send=function(t){var e=i(t),n=this.getHeader("Content-Type");if(e&&i(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(n||this.type("form"),n=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return e?(n||this.type("json"),this):this},f.prototype.callback=function(t,e){var n=this._callback;return this.clearTimeout(),2==n.length?n(t,e):t?this.emit("error",t):void n(e)},f.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},f.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},f.prototype.withCredentials=function(){return this._withCredentials=!0,this},f.prototype.end=function(t){var e=this,i=this.xhr=o(),s=this._query.join("&"),a=this._timeout,u=this._formData||this._data;if(this._callback=t||n,i.onreadystatechange=function(){return 4==i.readyState?0==i.status?e.aborted?e.timeoutError():e.crossDomainError():void e.emit("end"):void 0},i.upload&&(i.upload.onprogress=function(t){t.percent=t.loaded/t.total*100,e.emit("progress",t)}),a&&!this._timer&&(this._timer=setTimeout(function(){e.abort()},a)),s&&(s=p.serializeObject(s),this.url+=~this.url.indexOf("?")?"&"+s:"?"+s),i.open(this.method,this.url,!0),this._withCredentials&&(i.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof u&&!r(u)){var c=p.serialize[this.getHeader("Content-Type")];c&&(u=c(u))}for(var l in this.header)null!=this.header[l]&&i.setRequestHeader(l,this.header[l]);return this.emit("request",this),i.send(u),this},p.Request=f,p.get=function(t,e,n){var r=p("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},p.head=function(t,e,n){var r=p("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},p.del=function(t,e){var n=p("DELETE",t);return e&&n.end(e),n},p.patch=function(t,e,n){var r=p("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},p.post=function(t,e,n){var r=p("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},p.put=function(t,e,n){var r=p("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},e.exports=p},{emitter:19,reduce:20}],19:[function(t,e){function n(t){return t?r(t):void 0}function r(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var r=0,o=n.length;o>r;++r)n[r].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],20:[function(t,e){e.exports=function(t,e,n){for(var r=0,o=t.length,i=3==arguments.length?n:t[r++];o>r;)i=e.call(null,i,t[r],++r,t);return i}},{}],21:[function(t,e){(function(n){"use strict";function r(t,e){if(this.charset=null,this.language=null,this.url="string"==typeof t?t:null,"object"==typeof e&&e)for(var n in e){var r=e[n];this.hasOwnProperty(n)&&"undefined"!=typeof r&&(this[n]=r)}}function o(e,i,s){if(this.apiKey=String(e),this.blog=i instanceof r?i:new r(i),this.userAgent=c.format("Node.js/%s | Akismet.js/%s",n.version.length?n.version:"0.0.0",t("../package.json").version),this.serviceUrl="https://"+o.DEFAULT_SERVICE,"object"==typeof s&&s)for(var a in s){var u=s[a];this.hasOwnProperty(a)&&"undefined"!=typeof u&&(this[a]=u)}}var i=t("./enums"),s=s||t("promise"),a=t("superagent"),u=t("url"),c=t("util");r.fromJSON=function(t){var e;if("string"!=typeof t)e=t;else try{e=JSON.parse(t)}catch(n){return null}return e&&"object"==typeof e?new r(e.blog,{charset:e.blog_charset,language:e.blog_lang}):null},r.prototype.toJSON=function(t){var e={};return"string"==typeof this.url&&(e.blog=this.url),"string"==typeof this.charset&&(e.blog_charset=this.charset),"string"==typeof this.language&&(e.blog_lang=this.language),JSON.stringify(e,null,t)},r.prototype.toString=function(){return"Blog "+this.toJSON(2)},o.DEFAULT_SERVICE="rest.akismet.com",o.prototype.checkComment=function(t){var e=u.parse(this.serviceUrl),n=e.host!=o.DEFAULT_SERVICE?u.resolve(this.serviceUrl,i.EndPoints.CHECK_COMMENT):c.format("%s//%s.%s%s",e.protocol,this.apiKey,e.host,i.EndPoints.CHECK_COMMENT),r=JSON.parse(t.toJSON());return this._queryService(n,r).then(function(t){return"true"==t})},o.prototype.submitHam=function(t){var e=u.parse(this.serviceUrl),n=e.host!=o.DEFAULT_SERVICE?u.resolve(this.serviceUrl,i.EndPoints.SUBMIT_HAM):c.format("%s//%s.%s%s",e.protocol,this.apiKey,e.host,i.EndPoints.SUBMIT_HAM);return this._queryService(n,JSON.parse(t.toJSON()))},o.prototype.submitSpam=function(t){var e=u.parse(this.serviceUrl),n=e.host!=o.DEFAULT_SERVICE?u.resolve(this.serviceUrl,i.EndPoints.SUBMIT_SPAM):c.format("%s//%s.%s%s",e.protocol,this.apiKey,e.host,i.EndPoints.SUBMIT_SPAM);return this._queryService(n,JSON.parse(t.toJSON()))},o.prototype.toString=function(){return c.format('Client { apiKey: "%s", blog: "%s", serviceUrl: "%s", userAgent: "%s" }',this.apiKey,this.blog.url,this.serviceUrl,this.userAgent)},o.prototype.verifyKey=function(){var t=u.resolve(this.serviceUrl,i.EndPoints.VERIFY_KEY);return this._queryService(t,{}).then(function(t){return"valid"==t})},o.prototype._queryService=function(t,e){e.key=this.apiKey,e.blog=this.blog.url,this.blog.charset&&(e.blog_charset=this.blog.charset),this.blog.lang&&(e.blog_lang=this.blog.lang);var n=this;return new s(function(r,o){a.post(t).type("form").send(e).set("undefined"!=typeof window?i.HTTPHeaders.X_USER_AGENT:"user-agent",n.userAgent).end(function(t){if(t.ok){var e=i.HTTPHeaders.X_AKISMET_DEBUG_HELP;e in t.header?o(new Error(t.header[e])):r(t.text)}else o(new Error(t.error?t.error.toString():t.status))})})},e.exports={Blog:r,Client:o}}).call(this,t("_process"))},{"../package.json":24,"./enums":23,_process:4,promise:12,superagent:18,url:9,util:11}],22:[function(t,e){"use strict";function n(t){if(this.email=null,this.ipAddress=null,this.name=null,this.url=null,this.userAgent=null,"object"==typeof t&&t)for(var e in t){var n=t[e];this.hasOwnProperty(e)&&"undefined"!=typeof n&&(this[e]=n)}}function r(t){if(this.author=null,this.content=null,this.permalink=null,this.referrer=null,this.type=null,"object"==typeof t&&t)for(var e in t){var n=t[e];this.hasOwnProperty(e)&&"undefined"!=typeof n&&(this[e]=n)}}var o={COMMENT:"comment",PINGBACK:"pingback",TRACKBACK:"trackback"};n.fromJSON=function(t){var e;if("string"!=typeof t)e=t;else try{e=JSON.parse(t)}catch(r){return null}return e&&"object"==typeof e?new n({name:e.comment_author,email:e.comment_author_email,url:e.comment_author_url,userAgent:e.user_agent,ipAddress:e.user_ip}):null},n.prototype.toJSON=function(t){var e={};return"string"==typeof this.name&&(e.comment_author=this.name),"string"==typeof this.email&&(e.comment_author_email=this.email),"string"==typeof this.url&&(e.comment_author_url=this.url),"string"==typeof this.userAgent&&(e.user_agent=this.userAgent),"string"==typeof this.ipAddress&&(e.user_ip=this.ipAddress),JSON.stringify(e,null,t)},n.prototype.toString=function(){return"Author "+this.toJSON(2)},r.fromJSON=function(t){var e;if("string"!=typeof t)e=t;else try{e=JSON.parse(t)}catch(o){return null}if(!e||"object"!=typeof e)return null;var i=!1;for(var s in e)if("comment_author"==s.substr(0,"comment_author".length)||"user"==s.substr(0,"user".length)){i=!0;break}return new r({author:i?n.fromJSON(e):null,content:e.comment_content,type:e.comment_type,permalink:e.permalink,referrer:e.referrer})},r.prototype.toJSON=function(t){var e={};if(this.author instanceof n){var r=JSON.parse(this.author.toJSON());for(var o in r)e[o]=r[o]}return"string"==typeof this.content&&(e.comment_content=this.content),"string"==typeof this.type&&(e.comment_type=this.type),"string"==typeof this.permalink&&(e.permalink=this.permalink),"string"==typeof this.referrer&&(e.referrer=this.referrer),JSON.stringify(e,null,t)},r.prototype.toString=function(){return"Comment "+this.toJSON(2)},e.exports={Author:n,Comment:r,CommentType:o}},{}],23:[function(t,e){"use strict";var n={CHECK_COMMENT:"/1.1/comment-check",SUBMIT_HAM:"/1.1/submit-ham",SUBMIT_SPAM:"/1.1/submit-spam",VERIFY_KEY:"/1.1/verify-key"},r={X_AKISMET_DEBUG_HELP:"x-akismet-debug-help",X_REQUESTED_WITH:"x-requested-with",X_USER_AGENT:"x-user-agent"};e.exports={EndPoints:n,HTTPHeaders:r}},{}],24:[function(t,e){e.exports={author:"Cédric Belin <cedric@belin.io>",bugs:"https://github.com/cedx/akismet.js/issues",description:"Prevent comment spam using Akismet service.",homepage:"https://github.com/cedx/akismet.js",license:"MIT",main:"./index",name:"akismet-js",version:"0.4.0",bin:{akismet:"./bin/cli.js"},dependencies:{"body-parser":"^1.10.1",commander:"^2.6.0",cors:"^2.5.2",express:"^4.11.0",forever:"^0.13.0",promise:"^6.0.1",superagent:"^0.21.0"},devDependencies:{browserify:"8.1.1",david:"^6.1.0",del:"^1.1.1","docgen-js":"^0.0.1",gulp:"^3.8.10","gulp-jshint":"^1.9.0","gulp-load-plugins":"^0.8.0","gulp-mocha":"^2.0.0","gulp-sourcemaps":"^1.3.0","gulp-uglify":"^1.0.2","gulp-zip":"^2.0.2","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.0.0"},engines:{node:">=0.10.0"},jshintConfig:{browser:!0,freeze:!0,indent:2,latedef:"nofunc",loopfunc:!0,newcap:!0,node:!0,nonew:!0,quotmark:"single",strict:!0,trailing:!0,undef:!0,unused:!0,globals:{describe:!1,it:!1,Promise:!0}},keywords:["akismet","comment","spam","validation"],repository:{type:"git",url:"https://github.com/cedx/akismet.js.git"},scripts:{start:"forever start -c node -e var/stderr.log -o var/stdout.log -l var/forever.log --append --minUptime 30000 --spinSleepTime 30000 --uid akismet bin/cli.js",stop:"forever stop akismet",test:"gulp test"},yuidoc:{logo:"http://dev.belin.io/akismet.js/favicon.ico",name:"Akismet.js",url:"https://www.npmjs.com/package/akismet-js",options:{linkNatives:!0,outdir:"doc/api",paths:"lib",tabtospace:2,theme:"default"}}}},{}],25:[function(t){(function(e){"use strict";var n=t("assert"),r=t("../lib/comment").Author,o=t("../lib/client").Blog,i=t("../lib/client").Client,s=t("../lib/comment").Comment,a=t("../lib/comment").CommentType,u={run:function(){var t=this;describe("Blog",function(){describe("fromJSON()",t.testFromJSON),describe("toJSON()",t.testToJSON)})},testFromJSON:function(){it("should return a null reference with a non-object JSON string",function(){n.strictEqual(o.fromJSON("foo"),null)}),it("should return an empty instance with an empty JSON object",function(){var t=o.fromJSON("{}");n.strictEqual(t.charset,null),n.strictEqual(t.language,null),n.strictEqual(t.url,null)}),it("should return an initialized instance with a non-empty JSON object",function(){var t=o.fromJSON('{ "blog": "http://dev.belin.io/akismet.js", "blog_charset": "UTF-8", "blog_lang": "en" }');n.equal(t.charset,"UTF-8"),n.equal(t.language,"en"),n.equal(t.url,"http://dev.belin.io/akismet.js")})},testToJSON:function(){it("should return an empty JSON object with a newly created instance",function(){n.equal((new o).toJSON(),"{}")}),it("should return a non-empty JSON object with a initialized instance",function(){var t=new o("http://dev.belin.io/akismet.js",{charset:"UTF-8",language:"en"});n.equal(t.toJSON(),'{"blog":"http://dev.belin.io/akismet.js","blog_charset":"UTF-8","blog_lang":"en"}')})}},c={_client:new i(e.env.AKISMET_API_KEY,"AKISMET_BLOG"in e.env?e.env.AKISMET_BLOG:"http://dev.belin.io/akismet.js",{serviceUrl:"AKISMET_SERVICE_URL"in e.env?e.env.AKISMET_SERVICE_URL:"https://"+i.DEFAULT_SERVICE}),_ham:new s({author:new r({ipAddress:"192.168.0.1",name:"Akismet.js",url:"http://dev.belin.io/akismet.js",userAgent:"Mozilla/5.0 (Windows NT 6.3; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0"}),content:"I'm testing out the Service API.",referrer:"https://www.npmjs.com/package/akismet-js",type:a.COMMENT}),_spam:new s({author:new r({ipAddress:"127.0.0.1",name:"viagra-test-123",userAgent:"Spam Bot/6.6.6"}),content:"Spam!",type:a.TRACKBACK}),run:function(){var t=this;describe("Client",function(){this.timeout(1e4),describe("verifyKey()",t.testVerifyKey.bind(t)),describe("submitHam()",t.testSubmitHam.bind(t)),describe("submitSpam()",t.testSubmitSpam.bind(t)),describe("checkComment()",t.testCheckComment.bind(t))})},testCheckComment:function(){var t=this;it("should return `false` for valid comment (e.g. ham)",function(e){t._client.checkComment(t._ham).then(function(t){n.strictEqual(t,!1),e()},e)}),it("should return `true` for invalid comment (e.g. spam)",function(e){t._client.checkComment(t._spam).then(function(t){n.strictEqual(t,!0),e()},e)})},testSubmitHam:function(){var t=this;it("should complete without error",function(e){t._client.submitHam(t._ham).then(function(){e()},e)})},testSubmitSpam:function(){var t=this;it("should complete without error",function(e){t._client.submitSpam(t._spam).then(function(){e()},e)})},testVerifyKey:function(){var t=this;it("should return `true` for a valid API key",function(e){t._client.verifyKey().then(function(t){n.strictEqual(t,!0),e()},e)}),it("should return `false` for an invalid API key",function(e){var r=new i("viagra-test-123",t._client.blog,{serviceUrl:t._client.serviceUrl});r.verifyKey().then(function(t){n.strictEqual(t,!1),e()},e)})}};u.run(),c.run()}).call(this,t("_process"))},{"../lib/client":21,"../lib/comment":22,_process:4,assert:2}],26:[function(t){"use strict";var e=t("assert"),n=t("../lib/comment").Author,r=t("../lib/comment").Comment,o=t("../lib/comment").CommentType,i={run:function(){var t=this;describe("Author",function(){describe("fromJSON()",t.testFromJSON),describe("toJSON()",t.testToJSON)})},testFromJSON:function(){it("should return a null reference with a non-object JSON string",function(){e.strictEqual(n.fromJSON("foo"),null)}),it("should return an empty instance with an empty JSON object",function(){var t=n.fromJSON("{}");e.strictEqual(t.email,null),e.strictEqual(t.url,null)}),it("should return an initialized instance with a non-empty JSON object",function(){var t=n.fromJSON('{ "comment_author_email": "cedric@belin.io", "comment_author_url": "http://belin.io" }');e.equal(t.email,"cedric@belin.io"),e.equal(t.url,"http://belin.io")})},testToJSON:function(){it("should return an empty JSON object with a newly created instance",function(){e.equal((new n).toJSON(),"{}")}),it("should return a non-empty JSON object with a initialized instance",function(){var t=new n({name:"Cédric Belin",email:"cedric@belin.io",ipAddress:"127.0.0.1",url:"http://belin.io"});e.equal(t.toJSON(),'{"comment_author":"Cédric Belin","comment_author_email":"cedric@belin.io","comment_author_url":"http://belin.io","user_ip":"127.0.0.1"}')})}},s={run:function(){var t=this;describe("Comment",function(){describe("fromJSON()",t.testFromJSON),describe("toJSON()",t.testToJSON)})},testFromJSON:function(){it("should return a null reference with a non-object JSON string",function(){e.strictEqual(r.fromJSON("foo"),null)}),it("should return an empty instance with an empty JSON object",function(){var t=r.fromJSON("{}");e.strictEqual(t.author,null),e.strictEqual(t.content,null),e.strictEqual(t.referrer,null),e.strictEqual(t.type,null)}),it("should return an initialized instance with a non-empty JSON object",function(){var t=r.fromJSON('{ "comment_author": "Cédric Belin", "comment_content": "A user comment.", "comment_type": "trackback", "referrer": "http://belin.io" }');e(t.author instanceof n),e.equal(t.author.name,"Cédric Belin"),e.equal(t.content,"A user comment."),e.equal(t.referrer,"http://belin.io"),e.equal(t.type,o.TRACKBACK)})},testToJSON:function(){it("should return an empty JSON object with a newly created instance",function(){e.equal((new r).toJSON(),"{}")}),it("should return a non-empty JSON object with a initialized instance",function(){var t=new r({author:new n({name:"Cédric Belin"}),content:"A user comment.",referrer:"http://belin.io",type:o.PINGBACK});e.equal(t.toJSON(),'{"comment_author":"Cédric Belin","comment_content":"A user comment.","comment_type":"pingback","referrer":"http://belin.io"}')})}};i.run(),s.run()},{"../lib/comment":22,assert:2}]},{},[1]);
//# sourceMappingURL=tests.js.map